<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>퀄리스포츠 제품 등록 시스템</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./css/style.css">
</head>
<body>
<div class="inquiry-container regist-container">
  <div class="nav-header"><a href="./main.html" class="home-btn">🏠 메인으로</a></div>
  <h2>퀄리스포츠 제품 등록 및 보증 연장</h2>
  
  <form id="registForm">
    
    <!-- 통합된 약관 동의 UI (그룹화) -->
    <div class="terms-container">
      <div class="terms-header">
        <label class="agree-all-label"><input type="checkbox" id="allAgree"> 약관 전체 동의하기</label>
      </div>
      <div class="terms-body">
        <div class="terms-row">
          <label><input type="checkbox" id="privacyAgree" class="agree-item"> 개인정보 수집 및 이용 동의 <span class="badge-req">(필수)</span></label>
          <button type="button" class="btn-view-term" onclick="openModal('modalPrivacy')">내용보기</button>
        </div>
        <div class="terms-row">
          <label><input type="checkbox" id="thirdPartyAgree" class="agree-item"> 개인정보 제3자 제공 동의 <span class="badge-req">(필수)</span></label>
          <button type="button" class="btn-view-term" onclick="openModal('modalThird')">내용보기</button>
        </div>
        <!-- [NEW] 국외 이전 동의 -->
        <div class="terms-row">
          <label><input type="checkbox" id="transferAgree" class="agree-item"> 개인정보 국외 이전 동의 <span class="badge-req">(필수)</span></label>
          <button type="button" class="btn-view-term" onclick="openModal('modalTransfer')">내용보기</button>
        </div>
        <div class="terms-row">
          <label><input type="checkbox" id="marketingAgree" class="agree-item"> 마케팅 정보 수신 동의 <span class="badge-opt">(선택)</span></label>
          <button type="button" class="btn-view-term" onclick="openModal('modalMarketing')">내용보기</button>
        </div>
      </div>
    </div>

    <div class="form-group" style="margin-top:20px;">
      <label for="serialNo">제품 번호(차대번호) <span class="required-mark">*</span></label>
      <div class="serial-guide-box"><img src="https://placehold.co/400x150/png?text=Serial+Number+Location" alt="차대번호 예시"><div class="serial-guide-text">💡 제품별로 차대번호 각인 위치가 다릅니다.</div></div>
      
      <div class="input-wrapper">
        <div id="stepBadge" class="step-badge">먼저 조회해주세요!</div>
        <input type="text" id="serialNo" class="highlight-input" placeholder="차대번호를 먼저 입력해주세요" autocomplete="off">
        <button type="button" id="btnCheckSerial" class="check-btn">조회</button>
      </div>
      <p id="serialError" class="error-msg">올바른 형식이 아닙니다.</p>
    </div>

    <div class="form-row">
      <div class="form-group"><label for="userName">이름 <span class="required-mark">*</span></label><input type="text" id="userName" placeholder="성함 입력" autocomplete="off"></div>
      <div class="form-group"><label for="userPhone">전화번호 <span class="required-mark">*</span></label><input type="text" id="userPhone" placeholder="010-0000-0000" maxlength="13" autocomplete="off"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label for="productSelect">구입 제품 모델 <span class="required-mark">*</span></label><select id="productSelect"><option value="">불러오는 중...</option></select></div>
      <div class="form-group">
        <label for="storeInput">구입 매장 (검색) <span class="required-mark">*</span></label>
        <input type="text" id="storeInput" placeholder="매장명, 대리점명, 주소 검색" autocomplete="off">
        <input type="hidden" id="storeCode"><ul id="suggestions" class="suggestions-list"></ul><div id="storeInfoDisplay" class="store-info-display"></div>
      </div>
    </div>
    <div class="form-group">
      <label for="receiptFile">구매 영수증 첨부 (이미지) <span class="required-mark">*</span></label>
      <input type="file" id="receiptFile" accept="image/jpeg,image/png,application/pdf">
      <img id="imgPreview">
      <div style="font-size:11px; color:#e74c3c; margin-top:5px; font-weight:bold;">* 3MB 이하의 JPG, PNG, PDF 파일만 업로드 가능합니다.</div>
    </div>

    <button type="button" class="submit-btn">등록 신청하기</button>
    <div id="loadingArea" class="loading-container"><div class="spinner"></div><div id="loadingText" class="loading-msg">사진 업로드 및 등록 중입니다...</div><div id="waitText" class="wait-msg">잠시만 기다려주세요.</div></div>
  </form>
  <div class="footer-logo"><img src="https://via.placeholder.com/150x40/231f20/ffffff?text=QUALI+SPORTS" alt="QUALI SPORTS"></div>
</div>

<!-- 모달 영역 -->
<div id="modalPrivacy" class="modal-overlay" onclick="closeModal('modalPrivacy')"><div class="modal-box" onclick="event.stopPropagation()">
  <div class="modal-header">[필수]개인정보 수집 및 이용 동의 <button class="modal-close" onclick="closeModal('modalPrivacy')">&times;</button>
  </div>
  <div class="modal-content">
퀄리스포츠(이하 “회사”)는 고객님의 제품등록 및 보증연장 서비스 제공을 위해 아래와 같이 개인정보를 수집·이용합니다.
1. 수집·이용 목적
제품 정품 등록 확인 및 소유자 식별
보증기간 연장 서비스 제공 및 잔여 보증 관리
A/S 접수 시 고객 확인 및 수리 이력 관리
제품 안전관리 및 중요 업데이트 안내(리콜, 안전 점검 등)

2. 수집 항목
필수항목: 성명, 휴대전화번호, 차대번호, 구입 모델, 구입 매장 정보, 구매영수증 또는 소유증빙 사진
생성항목: 서비스 이용기록, 접속 로그, A/S 처리 기록

3. 보유 및 이용 기간
서비스 이용 시부터 A/S 최종 처리일로부터 3년까지
단, 관계 법령(전자상거래법 등)에 따라 보존 의무가 있는 경우 해당 법령이 정한 기간까지 보관합니다.

4. 동의 거부 권리 및 불이익
귀하는 본 동의를 거부할 권리가 있습니다. 다만, 필수 항목에 대한 동의를 거부하실 경우 제품 등록이 불가하며 그에 따른 보증 연장 및 안전 공지 서비스를 받으실 수 없습니다.
  </div>
    <div class="modal-footer"><button class="modal-btn" onclick="closeModal('modalPrivacy')">확인</button>
    </div>
  </div>
  </div>

<div id="modalThird" class="modal-overlay" onclick="closeModal('modalThird')">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-header">[필수]개인정보 제3자 제공 동의 <button class="modal-close" onclick="closeModal('modalThird')">&times;</button>
    </div>
    <div class="modal-content">
회사는 효율적인 서비스 제공과 전문적인 품질 관리를 위해 아래와 같이 계열사에 정보를 제공합니다.
1. 제공받는 자
(주)엑스트론

2. 제공받는 자의 이용 목적
퀄리스포츠 제품에 대한 통합 A/S 업무 수행
제품 결함 분석 및 품질 개선 활동
보증 연장 데이터 관리 및 고객 응대 지원
향후 사업 이관 시 서비스의 연속성 유지

3. 제공하는 항목
성명, 연락처, 차대번호, 구매 모델, 구입 매장 정보, 구매영수증 파일, 등록/처리 결과 정보

4. 제공받는 자의 보유 및 이용 기간
개인정보 수집·이용 동의 범위 내 (목적 달성 시 혹은 제공받는 자의 이용 목적 달성 시까지)

5. 동의 거부 권리 및 불이익
귀하는 본 동의를 거부할 수 있습니다. 다만, 본 동의는 원활한 A/S 및 보증 관리를 위한 필수적인 절차이므로, 동의 거부 시 해당 업체가 수행하는 전문적인 서비스 지원이 제한될 수 있습니다.
    </div>
      <div class="modal-footer"><button class="modal-btn" onclick="closeModal('modalThird')">확인</button>
      </div>
    </div>
  </div>

<!-- [NEW] 국외 이전 동의 모달 -->
<div id="modalTransfer" class="modal-overlay" onclick="closeModal('modalTransfer')"><div class="modal-box" onclick="event.stopPropagation()">
  <div class="modal-header">[필수]개인정보 국외 이전 동의 <button class="modal-close" onclick="closeModal('modalTransfer')">&times;</button>
  </div>
  <div class="modal-content">
회사는 글로벌 클라우드 인프라를 활용하여 데이터를 안전하게 보관하고 관리하기 위해 다음과 같이 개인정보를 국외로 이전합니다.

1. 이전되는 국가 및 일시
국가: 싱가포르 및 전세계 구글 데이터센터 소재지
일시: 제품 등록 완료 및 데이터 입력 시 수시 전송

2. 이전받는 자
Google Asia Pacific Pte. Ltd. (구글)
연락처: https://www.google.com/contact

3. 이전되는 개인정보 항목
수집된 개인정보 및 제품 등록 정보 전 항목 (성명, 연락처, 차대번호, 모델명, 구매 증빙 이미지 등)

4. 이전 방법 및 목적
방법: 전용 클라우드 네트워크(Google AppSheet / GAS)를 통한 암호화 전송
목적: 서비스 운영을 위한 데이터 저장, 시스템 유지보수 및 기술 지원

5. 이전받는 자의 보유 및 이용 기간
개인정보 수집·이용 동의 기간과 동일 (서비스 탈퇴 시 또는 목적 달성 시까지)

6. 동의 거부 권리 및 불이익
본 서비스는 구글의 클라우드 시스템을 기반으로 운영되므로, 국외 이전에 동의하지 않으실 경우 제품 등록 서비스 이용이 불가능합니다.
  </div>
    <div class="modal-footer"><button class="modal-btn" onclick="closeModal('modalTransfer')">확인</button>
    </div>
  </div>
</div>

<div id="modalMarketing" class="modal-overlay" onclick="closeModal('modalMarketing')">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-header">[선택]마케팅 정보 수신 동의 <button class="modal-close" onclick="closeModal('modalMarketing')">&times;</button>
    </div>
    <div class="modal-content">
퀄리스포츠(이하 “회사”)는 고객님께 더욱 풍성한 혜택과 신제품 소식을 전달하기 위해 아래와 같이 마케팅 목적의 개인정보 활용 및 광고성 정보 수신 동의를 받고자 합니다.

1. 개인정보 수집·이용 목적
신제품 출시 안내 및 프로모션 정보 전달
이벤트 참여 기회 제공 및 경품 발송
쿠폰, 할인 혜택 등 부가 서비스 안내
고객 맞춤형 서비스 제공을 위한 통계 및 분석

2. 수집 항목
성명, 휴대전화번호

3. 광고성 정보 수신 채널
카카오톡(알림톡/친구톡), 문자(SMS/MMS)

4. 보유 및 이용 기간
동의 철회 시 또는 서비스 종료 시까지
고객님께서 동의를 철회하시는 경우, 회사는 지체 없이 해당 정보를 파기합니다.

5. 동의 거부 권리 및 불이익
귀하는 본 동의를 거부할 권리가 있습니다. 본 동의는 선택 사항이므로 거부하시더라도 제품 등록 및 보증 연장 서비스 이용에는 어떠한 제한도 없습니다.
다만, 동의하지 않으실 경우 각종 프로모션 혜택, 이벤트 참여 안내, 할인 쿠폰 제공 등이 제한될 수 있습니다.

6. 철회 방법
회사 카카오톡 고객센터를 통한 요청
    </div>
    <div class="modal-footer"><button class="modal-btn" onclick="closeModal('modalMarketing')">확인</button>
    </div>
  </div>
</div>

<div id="systemAlert" class="modal-overlay">
  <div class="modal-box" style="max-width: 350px; text-align: center;">
    <div class="modal-header" style="justify-content: center;">알림</div>
    <div class="modal-content" style="padding: 30px 20px; font-size: 15px; word-break: keep-all;"><span id="systemAlertMsg"></span></div>
    <div class="modal-footer" style="justify-content: center;"><button class="modal-btn" id="systemAlertBtn">확인</button></div>
  </div>
</div>

<!-- 스크립트 로드 순서: 공통 -> 등록 로직 -->
<script src="./js/common.js"></script>
<script src="./js/regist.js"></script>
</body>
</html>